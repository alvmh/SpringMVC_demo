/**
 * This jQuery plugin displays pagination links inside the selected elements.
 * @version 1.2
 * @param {int} maxentries Number of entries to paginate
 * @param {Object} opts Several options (see README for documentation)
 * @return {Object} jQuery Object
 */
jQuery.fn.pagination=function(e,t){t=jQuery.extend({items_per_page:10,num_display_entries:10,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:true,next_show_always:true,callback:function(){return false}},t||{});return this.each(function(){function n(){return Math.ceil(e/t.items_per_page)}function r(){var e=Math.ceil(t.num_display_entries/2);var r=n();var i=r-t.num_display_entries;var s=o>e?Math.max(Math.min(o-e,i),0):0;var u=o>e?Math.min(o+e,r):Math.min(t.num_display_entries,r);return[s,u]}function i(e,n){o=e;s();var r=t.callback(e,u);if(!r){if(n.stopPropagation){n.stopPropagation()}else{n.cancelBubble=true}}return r}function s(){u.empty();var s=jQuery("<span style='color:#555;font-weight:normal;font-family:'微软雅黑'>共<font style='color:red'>"+e+"</font>条记录，每页显示<font style='color:red'>"+t.items_per_page+"</font>项</span>");u.append(s);var a=r();var f=n();var l=function(e){return function(t){return i(e,t)}};var c=function(n,r){n=n<0?0:n<f?n:f-1;r=jQuery.extend({text:n+1,classes:""},r||{});if(n==o||e==0){var i=jQuery("<span class='current'>"+r.text+"</span>")}else{var i=jQuery("<a>"+r.text+"</a>").bind("click",l(n)).attr("href",t.link_to.replace(/__id__/,n))}if(r.classes){i.addClass(r.classes)}u.append(i)};if(t.prev_text&&(o>0||t.prev_show_always)){c(o-1,{text:t.prev_text,classes:"prev"})}if(a[0]>0&&t.num_edge_entries>0){var h=Math.min(t.num_edge_entries,a[0]);for(var p=0;p<h;p++){c(p)}if(t.num_edge_entries<a[0]&&t.ellipse_text){jQuery("<span>"+t.ellipse_text+"</span>").appendTo(u)}}for(var p=a[0];p<a[1];p++){c(p)}if(a[1]<f&&t.num_edge_entries>0){if(f-t.num_edge_entries>a[1]&&t.ellipse_text){jQuery("<span>"+t.ellipse_text+"</span>").appendTo(u)}var d=Math.max(f-t.num_edge_entries,a[1]);for(var p=d;p<f;p++){c(p)}}if(t.next_text&&(o<f-1||t.next_show_always)){c(o+1,{text:t.next_text,classes:"next"})}}var o=t.current_page;e=!e||e<0?0:e;t.items_per_page=!t.items_per_page||t.items_per_page<0?1:t.items_per_page;var u=jQuery(this);this.selectPage=function(e){i(e)};this.prevPage=function(){if(o>0){i(o-1);return true}else{return false}};this.nextPage=function(){if(o<n()-1){i(o+1);return true}else{return false}};s()})}